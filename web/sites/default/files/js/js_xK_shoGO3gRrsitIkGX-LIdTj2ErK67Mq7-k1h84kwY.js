/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,drupalSettings){Drupal.viewsUi={};Drupal.behaviors.viewsUiEditView={attach(){$('[data-drupal-selector="edit-query-options-disable-sql-rewrite"]').on('click',()=>{$('.sql-rewrite-warning').toggleClass('js-hide');});}};Drupal.behaviors.viewsUiAddView={attach(context){const $context=$(context);const exclude=new RegExp('[^a-z0-9\\-]+','g');const replace='-';let suffix;const $fields=$context.find('[id^="edit-page-title"], [id^="edit-block-title"], [id^="edit-page-link-properties-title"]');if($fields.length)if(!this.fieldsFiller)this.fieldsFiller=new Drupal.viewsUi.FormFieldFiller($fields);else this.fieldsFiller.rebind($fields);const $pathField=$context.find('[id^="edit-page-path"]');if($pathField.length)if(!this.pathFiller)this.pathFiller=new Drupal.viewsUi.FormFieldFiller($pathField,exclude,replace);else this.pathFiller.rebind($pathField);const $feedField=$context.find('[id^="edit-page-feed-properties-path"]');if($feedField.length)if(!this.feedFiller){suffix='.xml';this.feedFiller=new Drupal.viewsUi.FormFieldFiller($feedField,exclude,replace,suffix);}else this.feedFiller.rebind($feedField);}};Drupal.viewsUi.FormFieldFiller=function($target,exclude,replace,suffix){this.source=$('#edit-label');this.target=$target;this.exclude=exclude||false;this.replace=replace||'';this.suffix=suffix||'';const self=this;this.populate=function(){return self._populate.call(self);};this.unbind=function(){return self._unbind.call(self);};this.bind();};$.extend(Drupal.viewsUi.FormFieldFiller.prototype,{bind(){this.unbind();this.source.on('keyup.viewsUi change.viewsUi',this.populate);this.target.on('focus.viewsUi',this.unbind);},getTransliterated(){let from=this.source.length?this.source[0].value:'';if(this.exclude)from=from.toLowerCase().replace(this.exclude,this.replace);return from;},_populate(){const transliterated=this.getTransliterated();const suffix=this.suffix;this.target.each(function(i){const maxlength=$(this).attr('maxlength')-suffix.length;this.value=transliterated.substr(0,maxlength)+suffix;});},_unbind(){this.source.off('keyup.viewsUi change.viewsUi',this.populate);this.target.off('focus.viewsUi',this.unbind);},rebind($fields){this.target=$fields;this.bind();}});Drupal.behaviors.addItemForm={attach(context){const $context=$(context);let $form=$context;if(!(context instanceof HTMLElement&&context.matches('form[id^="views-ui-add-handler-form"]')))$form=$context.find('form[id^="views-ui-add-handler-form"]');if(once('views-ui-add-handler-form',$form).length)new Drupal.viewsUi.AddItemForm($form);}};Drupal.viewsUi.AddItemForm=function($form){this.$form=$form;this.$form.find('.views-filterable-options :checkbox').on('click',this.handleCheck.bind(this));this.$selected_div=this.$form.find('.views-selected-options').parent();this.$selected_div.hide();this.checkedItems=[];};Drupal.viewsUi.AddItemForm.prototype.handleCheck=function(event){const $target=$(event.target);const label=$target.closest('td').next().html().trim();if(event.target.checked){this.$selected_div.show();this.$selected_div[0].style.display='block';this.checkedItems.push(label);}else{const position=$.inArray(label,this.checkedItems);for(let i=0;i<this.checkedItems.length;i++)if(i===position){this.checkedItems.splice(i,1);i--;break;}if(this.checkedItems.length===0)this.$selected_div.hide();}this.refreshCheckedItems();};Drupal.viewsUi.AddItemForm.prototype.refreshCheckedItems=function(){this.$selected_div.find('.views-selected-options').html(this.checkedItems.join(', ')).trigger('dialogContentResize');};Drupal.behaviors.viewsUiRenderAddViewButton={attach(context){const menu=once('views-ui-render-add-view-button','#views-display-menu-tabs',context);if(!menu.length)return;const $menu=$(menu);const $addDisplayDropdown=$(`<li class="add"><a href="#"><span class="icon add"></span>${Drupal.t('Add')}</a><ul class="action-list" style="display:none;"></ul></li>`);const $displayButtons=$menu.nextAll('input.add-display').detach();$displayButtons.appendTo($addDisplayDropdown.find('.action-list')).wrap('<li>').parent().eq(0).addClass('first').end().eq(-1).addClass('last');$displayButtons.each(function(){const $this=$(this);this.value=$this.attr('data-drupal-dropdown-label');});$addDisplayDropdown.appendTo($menu);$menu.find('li.add > a').on('click',function(event){event.preventDefault();const $trigger=$(this);Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu($trigger);});$('li.add',$menu).on('mouseleave',function(event){const $this=$(this);const $trigger=$this.children('a[href="#"]');if(Drupal.elementIsVisible($this.children('.action-list')[0]))Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu($trigger);});}};Drupal.behaviors.viewsUiRenderAddViewButton.toggleMenu=function($trigger){$trigger.parent().toggleClass('open');$trigger.next().slideToggle('fast');};Drupal.behaviors.viewsUiSearchOptions={attach(context){const $context=$(context);let $form=$context;if(!(context instanceof HTMLElement&&context.matches('form[id^="views-ui-add-handler-form"]')))$form=$context.find('form[id^="views-ui-add-handler-form"]');if(once('views-ui-filter-options',$form).length)new Drupal.viewsUi.OptionsSearch($form);}};Drupal.viewsUi.OptionsSearch=function($form){this.$form=$form;this.$form.on('click','td.title',(event)=>{const $target=$(event.currentTarget);$target.closest('tr').find('input').trigger('click');});const searchBoxSelector='[data-drupal-selector="edit-override-controls-options-search"]';const controlGroupSelector='[data-drupal-selector="edit-override-controls-group"]';this.$form.on('formUpdated',`${searchBoxSelector},${controlGroupSelector}`,this.handleFilter.bind(this));this.$searchBox=this.$form.find(searchBoxSelector);this.$controlGroup=this.$form.find(controlGroupSelector);this.options=this.getOptions(this.$form.find('.filterable-option'));this.$searchBox.on('keypress',(event)=>{if(event.which===13)event.preventDefault();});};$.extend(Drupal.viewsUi.OptionsSearch.prototype,{getOptions($allOptions){let $title;let $description;let $option;const options=[];const length=$allOptions.length;for(let i=0;i<length;i++){$option=$($allOptions[i]);$title=$option.find('.title');$description=$option.find('.description');options[i]={searchText:`${$title[0].textContent.toLowerCase()} ${$description[0].textContent.toLowerCase()}
              .toLowerCase()}`,$div:$option};}return options;},handleFilter(event){const search=this.$searchBox[0].value.toLowerCase();const words=search.split(' ');const group=this.$controlGroup[0].value;this.options.forEach((option)=>{function hasWord(word){return option.searchText.includes(word);}let found=true;if(search)found=words.every(hasWord);if(found&&group!=='all')found=option.$div.hasClass(group);option.$div.toggle(found);});$(event.target).trigger('dialogContentResize');}});Drupal.behaviors.viewsUiPreview={attach(context){const $contextualFiltersBucket=$(context).find('.views-display-column .views-ui-display-tab-bucket.argument');if($contextualFiltersBucket.length===0)return;const $contextualFilters=$contextualFiltersBucket.find('.views-display-setting a');if($contextualFilters.length)$('#preview-args').parent().show();else $('#preview-args').parent().hide();const $livePreview=$(once('edit-displays-live-preview','#edit-displays-live-preview'));if($livePreview.length&&$livePreview[0].checked)$(once('edit-displays-live-preview','#preview-submit')).trigger('click');}};Drupal.viewsUi.RearrangeFilterHandler=function($table,$operator){this.table=$table;this.operator=$operator;this.hasGroupOperator=this.operator.length>0;this.draggableRows=$table.find('.draggable');this.addGroupButton=$('#views-add-group');this.removeGroupButtons=$table.find('.views-remove-group');this.insertAddRemoveFilterGroupLinks();if(this.hasGroupOperator){this.dropdowns=this.duplicateGroupsOperator();this.syncGroupsOperators();}this.modifyTableDrag();this.redrawOperatorLabels();$(once('views-rearrange-filter-handler',$table.find('.views-group-title select'))).on('change.views-rearrange-filter-handler',this.redrawOperatorLabels.bind(this));$(once('views-rearrange-filter-handler',$table.find('a.views-groups-remove-link'))).on('click.views-rearrange-filter-handler',this.updateRowspans.bind(this)).on('click.views-rearrange-filter-handler',this.redrawOperatorLabels.bind(this));};$.extend(Drupal.viewsUi.RearrangeFilterHandler.prototype,{insertAddRemoveFilterGroupLinks(){$(once('views-rearrange-filter-handler',$(`<ul class="action-links"><li><a id="views-add-group-link" href="#">${this.addGroupButton[0].value}</a></li></ul>`).prependTo(this.table.parent()))).find('#views-add-group-link').on('click.views-rearrange-filter-handler',this.clickAddGroupButton.bind(this));const length=this.removeGroupButtons.length;let i;for(i=0;i<length;i++){const $removeGroupButton=$(this.removeGroupButtons[i]);const buttonId=$removeGroupButton.attr('id');$(once('views-rearrange-filter-handler',$(`<a href="#" class="views-remove-group-link">${Drupal.t('Remove group')}</a>`).insertBefore($removeGroupButton))).on('click.views-rearrange-filter-handler',{buttonId},this.clickRemoveGroupButton.bind(this));}},clickAddGroupButton(event){this.addGroupButton.trigger('mousedown');event.preventDefault();},clickRemoveGroupButton(event){this.table.find(`#${event.data.buttonId}`).trigger('mousedown');event.preventDefault();},duplicateGroupsOperator(){let newRow;let titleRow;const titleRows=once('duplicateGroupsOperator','tr.views-group-title');if(!titleRows.length)return this.operator;this.operator.find('label').add('div.description').addClass('visually-hidden');this.operator.find('select').addClass('form-select');const dropdowns=this.operator;titleRow=$('tr#views-group-title-2');newRow=$('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>');newRow.find('td').append(this.operator);newRow.insertBefore(titleRow);const length=titleRows.length;for(let i=2;i<length;i++){titleRow=$(titleRows[i]);const fakeOperator=this.operator.clone();fakeOperator.attr('id','');newRow=$('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>');newRow.find('td').append(fakeOperator);newRow.insertBefore(titleRow);dropdowns.add(fakeOperator);}return dropdowns;},syncGroupsOperators(){if(this.dropdowns.length<2)return;this.dropdowns.on('change',this.operatorChangeHandler.bind(this));},operatorChangeHandler(event){const $target=$(event.target);const operators=this.dropdowns.find('select').not($target);operators.each(function(index,item){item.value=$target[0].value;});},modifyTableDrag(){const tableDrag=Drupal.tableDrag['views-rearrange-filters'];const filterHandler=this;tableDrag.row.prototype.onSwap=function(){if(filterHandler.hasGroupOperator){const thisRow=$(this.group);const previousRow=thisRow.prev('tr');if(previousRow.length&&!previousRow.hasClass('group-message')&&!previousRow.hasClass('draggable')){const next=thisRow.next();if(next[0].tagName==='TR')this.swap('after',next);}filterHandler.updateRowspans();}filterHandler.redrawOperatorLabels();};tableDrag.onDrop=function(){const changeMarker=$(this.oldRowElement).find('.tabledrag-changed');if(changeMarker.length){const operatorLabel=changeMarker.prevAll('.views-operator-label');if(operatorLabel.length)operatorLabel.insertAfter(changeMarker);}const groupRow=$(this.rowObject.element).prevAll('tr.group-message').get(0);const groupName=groupRow.className.replace(/([^ ]+[ ]+)*group-([^ ]+)-message([ ]+[^ ]+)*/,'$2');const groupField=$('select.views-group-select',this.rowObject.element);if(!groupField[0].matches(`.views-group-select-${groupName}`)){const oldGroupName=groupField.attr('class').replace(/([^ ]+[ ]+)*views-group-select-([^ ]+)([ ]+[^ ]+)*/,'$2');groupField.removeClass(`views-group-select-${oldGroupName}`).addClass(`views-group-select-${groupName}`);groupField[0].value=groupName;}};},redrawOperatorLabels(){for(let i=0;i<this.draggableRows.length;i++){const $draggableRow=$(this.draggableRows[i]);const $firstCell=$draggableRow.find('td').eq(0);if($firstCell.length){const operatorValue=$draggableRow.prevAll('.views-group-title').find('option:selected').html();const operatorLabel=`<span class="views-operator-label">${operatorValue}</span>`;const $nextRow=$draggableRow.nextAll(':visible').eq(0);const $existingOperatorLabel=$firstCell.find('.views-operator-label');if($nextRow.hasClass('draggable'))if($existingOperatorLabel.length)$existingOperatorLabel.replaceWith(operatorLabel);else $firstCell.append(operatorLabel);else $existingOperatorLabel.remove();}}},updateRowspans(){let $row;let $currentEmptyRow;let draggableCount;let $operatorCell;const rows=$(this.table).find('tr');const length=rows.length;for(let i=0;i<length;i++){$row=$(rows[i]);if($row.hasClass('views-group-title')){$operatorCell=$row.find('td.group-operator');draggableCount=0;$currentEmptyRow=$row.next('tr');$currentEmptyRow.removeClass('group-populated').addClass('group-empty');$operatorCell.attr('rowspan',2);}else{if($row.hasClass('draggable')&&Drupal.elementIsVisible(rows[i])){draggableCount++;$currentEmptyRow.removeClass('group-empty').addClass('group-populated');$operatorCell.attr('rowspan',draggableCount+1);}}}}});Drupal.behaviors.viewsFilterConfigSelectAll={attach(context){const selectAll=once('filterConfigSelectAll','.js-form-item-options-value-all',context);if(selectAll.length){const $selectAll=$(selectAll);const $selectAllCheckbox=$selectAll.find('input[type=checkbox]');const $checkboxes=$selectAll.closest('.form-checkboxes').find('.js-form-type-checkbox:not(.js-form-item-options-value-all) input[type="checkbox"]');$selectAll.show();$selectAllCheckbox.on('click',function(){$checkboxes.prop('checked',this.checked);});$checkboxes.on('click',function(){if(this.checked===false)$selectAllCheckbox.prop('checked',false);});}}};Drupal.behaviors.viewsRemoveIconClass={attach(context){$(once('dropbutton-icon','.dropbutton',context)).find('.icon').removeClass('icon');}};Drupal.behaviors.viewsUiCheckboxify={attach(context,settings){const buttons=once('views-ui-checkboxify','[data-drupal-selector="edit-options-expose-button-button"], [data-drupal-selector="edit-options-group-button-button"]').forEach((button)=>new Drupal.viewsUi.Checkboxifier(button));}};Drupal.behaviors.viewsUiChangeDefaultWidget={attach(context){const $context=$(context);function changeDefaultWidget(event){if($(event.target).prop('checked')){$context.find('input.default-radios').parent().hide();$context.find('td.any-default-radios-row').parent().hide();$context.find('input.default-checkboxes').parent().show();}else{$context.find('input.default-checkboxes').parent().hide();$context.find('td.any-default-radios-row').parent().show();$context.find('input.default-radios').parent().show();}}$context.find('input[name="options[group_info][multiple]"]').on('change',changeDefaultWidget).trigger('change');}};Drupal.viewsUi.Checkboxifier=function(button){this.$button=$(button);this.$parent=this.$button.parent('div.views-expose, div.views-grouped');this.$input=this.$parent.find('input:checkbox, input:radio');this.$button.hide();this.$parent.find('.exposed-description, .grouped-description').hide();this.$input.on('click',this.clickHandler.bind(this));};Drupal.viewsUi.Checkboxifier.prototype.clickHandler=function(e){this.$button.trigger('click').trigger('submit');};Drupal.behaviors.viewsUiOverrideSelect={attach(context){once('views-ui-override-button-text','[data-drupal-selector="edit-override-dropdown"]',context).forEach((dropdown)=>{const $context=$(context);const submit=context.querySelector('[id^=edit-submit]');const oldValue=submit?submit.value:'';$(once('views-ui-override-button-text',submit)).on('mouseup',function(){this.value=oldValue;return true;});$(dropdown).on('change',function(){if(!submit)return;if(this.value==='default')submit.value=Drupal.t('Apply (all displays)');else if(this.value==='default_revert')submit.value=Drupal.t('Revert to default');else submit.value=Drupal.t('Apply (this display)');const $dialog=$context.closest('.ui-dialog-content');$dialog.trigger('dialogButtonsChange');}).trigger('change');});}};Drupal.behaviors.viewsUiHandlerRemoveLink={attach(context){const $context=$(context);$(once('views','a.views-remove-link',context)).on('click',function(event){const id=$(this).attr('id').replace('views-remove-link-','');$context.find(`#views-row-${id}`).hide();$context.find(`#views-removed-${id}`).prop('checked',true);event.preventDefault();});$(once('display','a.display-remove-link',context)).on('click',function(event){const id=$(this).attr('id').replace('display-remove-link-','');$context.find(`#display-row-${id}`).hide();$context.find(`#display-removed-${id}`).prop('checked',true);event.preventDefault();});}};Drupal.behaviors.viewsUiRearrangeFilter={attach(context){if(typeof Drupal.tableDrag==='undefined'||typeof Drupal.tableDrag['views-rearrange-filters']==='undefined')return;const table=once('views-rearrange-filters','#views-rearrange-filters',context);const operator=once('views-rearrange-filters','.js-form-item-filter-groups-operator',context);if(table.length)new Drupal.viewsUi.RearrangeFilterHandler($(table),$(operator));}};})(jQuery,Drupal,drupalSettings);;
(($,Drupal)=>{function DetailsSummarizedContent(node){this.$node=$(node);this.setupSummary();}$.extend(DetailsSummarizedContent,{instances:[]});$.extend(DetailsSummarizedContent.prototype,{setupSummary(){this.$detailsSummarizedContentWrapper=$(Drupal.theme('detailsSummarizedContentWrapper'));this.$node.on('summaryUpdated',this.onSummaryUpdated.bind(this)).trigger('summaryUpdated').find('> summary').append(this.$detailsSummarizedContentWrapper);},onSummaryUpdated(){const text=this.$node.drupalGetSummary();this.$detailsSummarizedContentWrapper.html(Drupal.theme('detailsSummarizedContentText',text));}});Drupal.behaviors.detailsSummary={attach(context){DetailsSummarizedContent.instances=DetailsSummarizedContent.instances.concat(once('details','details',context).map((details)=>new DetailsSummarizedContent(details)));}};Drupal.DetailsSummarizedContent=DetailsSummarizedContent;Drupal.theme.detailsSummarizedContentWrapper=()=>`<span class="summary"></span>`;Drupal.theme.detailsSummarizedContentText=(text)=>text?` (${text})`:'';})(jQuery,Drupal);;
(function($,Drupal){Drupal.behaviors.detailsAria={attach(){$(once('detailsAria','body')).on('click.detailsAria','summary',(event)=>{const $summary=$(event.currentTarget);const open=$(event.currentTarget.parentNode).attr('open')==='open'?'false':'true';$summary.attr({'aria-expanded':open,'aria-pressed':open});});}};})(jQuery,Drupal);;
(function($){const handleFragmentLinkClickOrHashChange=(e,$target)=>{$target.parents('details').not('[open]').find('> summary').trigger('click');};$('body').on('formFragmentLinkClickOrHashChange.details',handleFragmentLinkClickOrHashChange);})(jQuery);;
(function($,Drupal){function init(tab){const $tab=$(tab);const $target=$tab.find('[data-drupal-nav-tabs-target]');const isCollapsible=$tab.hasClass('is-collapsible');function openMenu(e){$target.toggleClass('is-open');}function handleResize(e){$tab.addClass('is-horizontal');const $tabs=$tab.find('.tabs');const isHorizontal=$tabs.outerHeight()<=$tabs.find('.tabs__tab').outerHeight();$tab.toggleClass('is-horizontal',isHorizontal);if(isCollapsible)$tab.toggleClass('is-collapse-enabled',!isHorizontal);if(isHorizontal)$target.removeClass('is-open');}$tab.addClass('position-container is-horizontal-enabled');$tab.on('click.tabs','[data-drupal-nav-tabs-trigger]',openMenu);$(window).on('resize.tabs',Drupal.debounce(handleResize,150)).trigger('resize.tabs');}Drupal.behaviors.navTabs={attach(context,settings){const notSmartPhone=window.matchMedia('(min-width: 300px)');if(notSmartPhone.matches)once('nav-tabs','[data-drupal-nav-tabs]',context).forEach(init);}};})(jQuery,Drupal);;
(function($,Drupal,drupalSettings){let activeItem=Drupal.url(drupalSettings.path.currentPath);$.fn.drupalToolbarMenuHorizontal=function(){let currentPath=drupalSettings.path.currentPath;const menu=once('toolbar-menu-horizontal',this);if(menu.length){const $menu=$(menu);if(activeItem){const count=currentPath.split('/').length;for(let i=0;i<count;i++){const $menuItem=$menu.find(`a[data-drupal-link-system-path="${currentPath}"]`);if($menuItem.length!==0){$menuItem.closest('a').addClass('is-active');break;}const lastIndex=currentPath.lastIndexOf('/');currentPath=currentPath.slice(0,lastIndex);}}}};$.fn.drupalToolbarMenu=function(){const ui={handleOpen:Drupal.t('Extend'),handleClose:Drupal.t('Collapse')};function toggleList($item,switcher){const $toggle=$item.children('.toolbar-box').children('.toolbar-handle');switcher=typeof switcher!=='undefined'?switcher:!$item.hasClass('open');$item.toggleClass('open',switcher);$toggle.toggleClass('open',switcher);$toggle.find('.action').each((index,element)=>{element.textContent=switcher?ui.handleClose:ui.handleOpen;});}function toggleClickHandler(event){const $toggle=$(event.target);const $item=$toggle.closest('li');toggleList($item);const $openItems=$item.siblings().filter('.open');toggleList($openItems,false);}function linkClickHandler(event){if(!Drupal.toolbar.models.toolbarModel.get('isFixed'))Drupal.toolbar.models.toolbarModel.set('activeTab',null);event.stopPropagation();}function initItems($menu){const options={class:'toolbar-icon toolbar-handle',action:ui.handleOpen,text:''};$menu.find('li > a').wrap('<div class="toolbar-box">');$menu.find('li').each((index,element)=>{const $item=$(element);if($item.children('ul.toolbar-menu').length){const $box=$item.children('.toolbar-box');const $link=$box.find('a');options.text=Drupal.t('@label',{'@label':$link.length?$link[0].textContent:''});$item.children('.toolbar-box').append($(Drupal.theme('toolbarMenuItemToggle',options)).hide().fadeIn(150));}});}function markListLevels($lists,level){level=!level?1:level;const $lis=$lists.children('li').addClass(`level-${level}`);$lists=$lis.children('ul');if($lists.length)markListLevels($lists,level+1);}function openActiveItem($menu){let currentPath=drupalSettings.path.currentPath;const pathItem=$menu.find(`a[href="${window.location.pathname}"]`);if(pathItem.length&&!activeItem)activeItem=window.location.pathname;if(activeItem){const $activeItem=$menu.find(`a[href="${activeItem}"]`).addClass('menu-item--active');if(pathItem.length===0&&activeItem){const count=currentPath.split('/').length;for(let i=0;i<count;i++){const $menuItem=$menu.find(`a[data-drupal-link-system-path="${currentPath}"]`);if($menuItem.length!==0){const $activeTrail=$menuItem.parentsUntil('.root','li').addClass('menu-item--active-trail');toggleList($activeTrail,true);break;}const lastIndex=currentPath.lastIndexOf('/');currentPath=currentPath.slice(0,lastIndex);}}else{const $activeTrail=$activeItem.parentsUntil('.root','li').addClass('menu-item--active-trail');toggleList($activeTrail,true);}}}return this.each(function(selector){const menu=once('toolbar-menu-vertical',this);if(menu.length){const $menu=$(menu);$menu.on('click.toolbar','.toolbar-box',toggleClickHandler).on('click.toolbar','.toolbar-box a',linkClickHandler);$menu.addClass('root');initItems($menu);markListLevels($menu);openActiveItem($menu);}});};Drupal.theme.toolbarMenuItemToggle=function(options){return `<button class="${options.class}"><span class="action">${options.action}</span> <span class="label">${options.text}</span></button>`;};})(jQuery,Drupal,drupalSettings);;
(function($,Drupal,drupalSettings){(()=>{if(!sessionStorage.getItem('Drupal.toolbar.toolbarState'))return;const toolbarState=JSON.parse(sessionStorage.getItem('Drupal.toolbar.toolbarState'));const {activeTray,orientation,isOriented}=toolbarState;const activeTrayElement=document.querySelector(`.toolbar-tray[data-toolbar-tray="${activeTray}"]`);const activeTrayToggle=document.querySelector(`.toolbar-item[data-toolbar-tray="${activeTray}"]`);if(activeTrayElement){activeTrayElement.classList.add(`toolbar-tray-${orientation}`,'is-active');activeTrayToggle.classList.add('is-active');}if(isOriented)document.querySelector('#toolbar-administration').classList.add('toolbar-oriented');})();const options=$.extend({breakpoints:{'toolbar.narrow':'','toolbar.standard':'','toolbar.wide':''}},drupalSettings.toolbar,{strings:{horizontal:Drupal.t('Horizontal orientation'),vertical:Drupal.t('Vertical orientation')}});Drupal.behaviors.toolbar={attach(context){if(!window.matchMedia('only screen').matches)return;once('toolbar','#toolbar-administration',context).forEach((toolbar)=>{const model=new Drupal.toolbar.ToolbarModel({locked:JSON.parse(localStorage.getItem('Drupal.toolbar.trayVerticalLocked')),activeTab:document.getElementById(JSON.parse(localStorage.getItem('Drupal.toolbar.activeTabID'))),height:$('#toolbar-administration').outerHeight()});Drupal.toolbar.models.toolbarModel=model;Object.keys(options.breakpoints).forEach((label)=>{const mq=options.breakpoints[label];const mql=window.matchMedia(mq);Drupal.toolbar.mql[label]=mql;mql.addListener(Drupal.toolbar.mediaQueryChangeHandler.bind(null,model,label));Drupal.toolbar.mediaQueryChangeHandler.call(null,model,label,mql);});Drupal.toolbar.views.toolbarVisualView=new Drupal.toolbar.ToolbarVisualView({el:toolbar,model,strings:options.strings});Drupal.toolbar.views.toolbarAuralView=new Drupal.toolbar.ToolbarAuralView({el:toolbar,model,strings:options.strings});Drupal.toolbar.views.bodyVisualView=new Drupal.toolbar.BodyVisualView({el:toolbar,model});model.trigger('change:isFixed',model,model.get('isFixed'));model.trigger('change:activeTray',model,model.get('activeTray'));const menuModel=new Drupal.toolbar.MenuModel();Drupal.toolbar.models.menuModel=menuModel;Drupal.toolbar.views.menuVisualView=new Drupal.toolbar.MenuVisualView({el:$(toolbar).find('.toolbar-menu-administration').get(0),model:menuModel,strings:options.strings});Drupal.toolbar.setSubtrees.done((subtrees)=>{menuModel.set('subtrees',subtrees);const theme=drupalSettings.ajaxPageState.theme;localStorage.setItem(`Drupal.toolbar.subtrees.${theme}`,JSON.stringify(subtrees));model.set('areSubtreesLoaded',true);});Drupal.toolbar.views.toolbarVisualView.loadSubtrees();$(document).on('drupalViewportOffsetChange.toolbar',(event,offsets)=>{model.set('offsets',offsets);});model.on('change:orientation',(model,orientation)=>{$(document).trigger('drupalToolbarOrientationChange',orientation);}).on('change:activeTab',(model,tab)=>{$(document).trigger('drupalToolbarTabChange',tab);}).on('change:activeTray',(model,tray)=>{$(document).trigger('drupalToolbarTrayChange',tray);});const toolbarState=sessionStorage.getItem('Drupal.toolbar.toolbarState')?JSON.parse(sessionStorage.getItem('Drupal.toolbar.toolbarState')):{};if(Drupal.toolbar.models.toolbarModel.get('orientation')==='horizontal'&&Drupal.toolbar.models.toolbarModel.get('activeTab')===null&&!toolbarState.orientation)Drupal.toolbar.models.toolbarModel.set({activeTab:$('.toolbar-bar .toolbar-tab:not(.home-toolbar-tab) a').get(0)});$(window).on({'dialog:aftercreate':(event,dialog,$element,settings)=>{const toolbarBar=document.getElementById('toolbar-bar');toolbarBar.style.marginTop='0';if(settings.drupalOffCanvasPosition==='top'){const height=Drupal.offCanvas.getContainer($element).outerHeight();toolbarBar.style.marginTop=`${height}px`;$element.on('dialogContentResize.off-canvas',()=>{const newHeight=Drupal.offCanvas.getContainer($element).outerHeight();toolbarBar.style.marginTop=`${newHeight}px`;});}},'dialog:beforeclose':()=>{const toolbarBar=document.getElementById('toolbar-bar');toolbarBar.style.marginTop='0';}});});if(once('toolbarAntiFlicker','#toolbar-administration',context).length)Drupal.toolbar.models.toolbarModel.on('change:activeTab change:orientation change:isOriented change:isTrayToggleVisible change:offsets',function(){const userButton=document.querySelector('#toolbar-item-user');const hasActiveTab=!!$(this.get('activeTab')).length>0;const previousToolbarState=sessionStorage.getItem('Drupal.toolbar.toolbarState')?JSON.parse(sessionStorage.getItem('Drupal.toolbar.toolbarState')):{};const toolbarState={...previousToolbarState,orientation:Drupal.toolbar.models.toolbarModel.get('orientation'),hasActiveTab,activeTabId:hasActiveTab?this.get('activeTab').id:null,activeTray:$(this.get('activeTab')).attr('data-toolbar-tray'),isOriented:this.get('isOriented'),isFixed:this.get('isFixed'),userButtonMinWidth:userButton?userButton.clientWidth:0};sessionStorage.setItem('Drupal.toolbar.toolbarState',JSON.stringify(toolbarState));});}};Drupal.toolbar={views:{},models:{},mql:{},setSubtrees:new $.Deferred(),mediaQueryChangeHandler(model,label,mql){switch(label){case 'toolbar.narrow':model.set({isOriented:mql.matches,isTrayToggleVisible:false});if(!mql.matches||!model.get('orientation'))model.set({orientation:'vertical'},{validate:true});break;case 'toolbar.standard':model.set({isFixed:mql.matches});break;case 'toolbar.wide':model.set({orientation:mql.matches&&!model.get('locked')?'horizontal':'vertical'},{validate:true});model.set({isTrayToggleVisible:mql.matches});break;default:break;}}};Drupal.theme.toolbarOrientationToggle=function(){return ('<div class="toolbar-toggle-orientation"><div class="toolbar-lining">'+'<button class="toolbar-icon" type="button"></button>'+'</div></div>');};Drupal.AjaxCommands.prototype.setToolbarSubtrees=function(ajax,response,status){Drupal.toolbar.setSubtrees.resolve(response.subtrees);};})(jQuery,Drupal,drupalSettings);;
(function(Backbone,Drupal){Drupal.toolbar.MenuModel=Backbone.Model.extend({defaults:{subtrees:null}});})(Backbone,Drupal);;
(function(Backbone,Drupal){Drupal.toolbar.ToolbarModel=Backbone.Model.extend({defaults:{activeTab:null,activeTray:null,isOriented:false,isFixed:false,areSubtreesLoaded:false,isViewportOverflowConstrained:false,orientation:'horizontal',locked:false,isTrayToggleVisible:true,height:null,offsets:{top:0,right:0,bottom:0,left:0}},validate(attributes,options){if(attributes.orientation==='horizontal'&&this.get('locked')&&!options.override)return Drupal.t('The toolbar cannot be set to a horizontal orientation when it is locked.');}});})(Backbone,Drupal);;
(function($,Drupal,Backbone){Drupal.toolbar.BodyVisualView=Backbone.View.extend({initialize(){this.listenTo(this.model,'change:activeTray ',this.render);this.listenTo(this.model,'change:isFixed change:isViewportOverflowConstrained',this.isToolbarFixed);},isToolbarFixed(){const isViewportOverflowConstrained=this.model.get('isViewportOverflowConstrained');$('body').toggleClass('toolbar-fixed',isViewportOverflowConstrained||this.model.get('isFixed'));},render(){$('body').toggleClass('toolbar-tray-open',!!this.model.get('activeTray'));}});})(jQuery,Drupal,Backbone);;
(function($,Backbone,Drupal){Drupal.toolbar.MenuVisualView=Backbone.View.extend({initialize(){this.listenTo(this.model,'change:subtrees',this.render);this.render();},render(){this.renderVertical();this.renderHorizontal();},renderHorizontal(){if('drupalToolbarMenu' in $.fn)this.$el.children('.toolbar-menu').drupalToolbarMenuHorizontal();},renderVertical(){const subtrees=this.model.get('subtrees');if(!this.model.get('subtrees'))return;Object.keys(subtrees||{}).forEach((id)=>{$(once('toolbar-subtrees',this.$el.find(`#toolbar-link-${id}`))).after(subtrees[id]);});if('drupalToolbarMenu' in $.fn)this.$el.children('.toolbar-menu').drupalToolbarMenu();}});})(jQuery,Backbone,Drupal);;
(function(Backbone,Drupal){Drupal.toolbar.ToolbarAuralView=Backbone.View.extend({initialize(options){this.strings=options.strings;this.listenTo(this.model,'change:orientation',this.onOrientationChange);this.listenTo(this.model,'change:activeTray',this.onActiveTrayChange);},onOrientationChange(model,orientation){Drupal.announce(Drupal.t('Tray orientation changed to @orientation.',{'@orientation':orientation}));},onActiveTrayChange(model,tray){const relevantTray=tray===null?model.previous('activeTray'):tray;if(!relevantTray)return;const action=tray===null?Drupal.t('closed'):Drupal.t('opened');const trayNameElement=relevantTray.querySelector('.toolbar-tray-name');let text;if(trayNameElement!==null)text=Drupal.t('Tray "@tray" @action.',{'@tray':trayNameElement.textContent,'@action':action});else text=Drupal.t('Tray @action.',{'@action':action});Drupal.announce(text);}});})(Backbone,Drupal);;
(function($,Drupal,drupalSettings,Backbone){Drupal.toolbar.ToolbarVisualView=Backbone.View.extend({events(){const touchEndToClick=function(event){event.preventDefault();event.target.click();};return {'click .toolbar-bar .toolbar-tab .trigger':'onTabClick','click .toolbar-toggle-orientation button':'onOrientationToggleClick','touchend .toolbar-bar .toolbar-tab .trigger':touchEndToClick,'touchend .toolbar-toggle-orientation button':touchEndToClick};},initialize(options){this.strings=options.strings;this.listenTo(this.model,'change:activeTab change:orientation change:isOriented change:isTrayToggleVisible',this.render);this.listenTo(this.model,'change:mqMatches',this.onMediaQueryChange);this.listenTo(this.model,'change:offsets',this.adjustPlacement);this.listenTo(this.model,'change:activeTab change:orientation change:isOriented',this.updateToolbarHeight);this.$el.find('.toolbar-tray .toolbar-lining').has('.toolbar-menu').append(Drupal.theme('toolbarOrientationToggle'));this.model.trigger('change:activeTab');},updateToolbarHeight(){const toolbarTabOuterHeight=$('#toolbar-bar').find('.toolbar-tab').outerHeight()||0;const toolbarTrayHorizontalOuterHeight=$('.is-active.toolbar-tray-horizontal').outerHeight()||0;this.model.set('height',toolbarTabOuterHeight+toolbarTrayHorizontalOuterHeight);$('body')[0].style.paddingTop=`${this.model.get('height')}px`;$('html')[0].style.scrollPaddingTop=`${this.model.get('height')}px`;this.triggerDisplace();},triggerDisplace(){_.defer(()=>{Drupal.displace(true);});},render(){this.updateTabs();this.updateTrayOrientation();this.updateBarAttributes();$('[data-toolbar-anti-flicker-loading]').remove();$('html').removeClass(['toolbar-loading','toolbar-horizontal','toolbar-vertical','toolbar-tray-open','toolbar-fixed','toolbar-oriented','toolbar-anti-flicker']);$('body').removeClass('toolbar-loading');if(this.model.changed.orientation==='vertical'||this.model.changed.activeTab)this.loadSubtrees();return this;},onTabClick(event){if(event.currentTarget.hasAttribute('data-toolbar-tray')){const activeTab=this.model.get('activeTab');const clickedTab=event.currentTarget;this.model.set('activeTab',!activeTab||clickedTab!==activeTab?clickedTab:null);event.preventDefault();event.stopPropagation();}},onOrientationToggleClick(event){const orientation=this.model.get('orientation');const antiOrientation=orientation==='vertical'?'horizontal':'vertical';const locked=antiOrientation==='vertical';if(locked)localStorage.setItem('Drupal.toolbar.trayVerticalLocked','true');else localStorage.removeItem('Drupal.toolbar.trayVerticalLocked');this.model.set({locked,orientation:antiOrientation},{validate:true,override:true});event.preventDefault();event.stopPropagation();},updateTabs(){const $tab=$(this.model.get('activeTab'));$(this.model.previous('activeTab')).removeClass('is-active').prop('aria-pressed',false);$(this.model.previous('activeTray')).removeClass('is-active');localStorage.removeItem('Drupal.toolbar.activeTabID');if($tab.length>0){$tab.addClass('is-active').prop('aria-pressed',true);const name=$tab.attr('data-toolbar-tray');const id=$tab.get(0).id;if(id)localStorage.setItem('Drupal.toolbar.activeTabID',JSON.stringify(id));const $tray=this.$el.find(`[data-toolbar-tray="${name}"].toolbar-tray`);if($tray.length){$tray.addClass('is-active');this.model.set('activeTray',$tray.get(0));}else this.model.set('activeTray',null);}else{this.model.set('activeTray',null);localStorage.removeItem('Drupal.toolbar.activeTabID');}},updateBarAttributes(){const isOriented=this.model.get('isOriented');if(isOriented)this.$el.find('.toolbar-bar').attr('data-offset-top','');else this.$el.find('.toolbar-bar').removeAttr('data-offset-top');this.$el.toggleClass('toolbar-oriented',isOriented);},updateTrayOrientation(){const orientation=this.model.get('orientation');const antiOrientation=orientation==='vertical'?'horizontal':'vertical';$('body').toggleClass('toolbar-vertical',orientation==='vertical').toggleClass('toolbar-horizontal',orientation==='horizontal');const removeClass=antiOrientation==='horizontal'?'toolbar-tray-horizontal':'toolbar-tray-vertical';const $trays=this.$el.find('.toolbar-tray').removeClass(removeClass).addClass(`toolbar-tray-${orientation}`);const iconClass=`toolbar-icon-toggle-${orientation}`;const iconAntiClass=`toolbar-icon-toggle-${antiOrientation}`;const $orientationToggle=this.$el.find('.toolbar-toggle-orientation').toggle(this.model.get('isTrayToggleVisible'));const $orientationToggleButton=$orientationToggle.find('button');$orientationToggleButton[0].value=antiOrientation;$orientationToggleButton.attr('title',this.strings[antiOrientation]).removeClass(iconClass).addClass(iconAntiClass);$orientationToggleButton[0].textContent=this.strings[antiOrientation];const dir=document.documentElement.dir;const edge=dir==='rtl'?'right':'left';$trays.removeAttr('data-offset-left data-offset-right data-offset-top');$trays.filter('.toolbar-tray-vertical.is-active').attr(`data-offset-${edge}`,'');$trays.filter('.toolbar-tray-horizontal.is-active').attr('data-offset-top','');},adjustPlacement(){const $trays=this.$el.find('.toolbar-tray');if(!this.model.get('isOriented'))$trays.removeClass('toolbar-tray-horizontal').addClass('toolbar-tray-vertical');},loadSubtrees(){const $activeTab=$(this.model.get('activeTab'));const orientation=this.model.get('orientation');if(!this.model.get('areSubtreesLoaded')&&typeof $activeTab.data('drupal-subtrees')!=='undefined'&&orientation==='vertical'){const subtreesHash=drupalSettings.toolbar.subtreesHash;const theme=drupalSettings.ajaxPageState.theme;const endpoint=Drupal.url(`toolbar/subtrees/${subtreesHash}`);const cachedSubtreesHash=localStorage.getItem(`Drupal.toolbar.subtreesHash.${theme}`);const cachedSubtrees=JSON.parse(localStorage.getItem(`Drupal.toolbar.subtrees.${theme}`));const isVertical=this.model.get('orientation')==='vertical';if(isVertical&&subtreesHash===cachedSubtreesHash&&cachedSubtrees)Drupal.toolbar.setSubtrees.resolve(cachedSubtrees);else{if(isVertical){localStorage.removeItem(`Drupal.toolbar.subtreesHash.${theme}`);localStorage.removeItem(`Drupal.toolbar.subtrees.${theme}`);Drupal.ajax({url:endpoint}).execute();localStorage.setItem(`Drupal.toolbar.subtreesHash.${theme}`,subtreesHash);}}}}});})(jQuery,Drupal,drupalSettings,Backbone);;
(function($,Drupal,{tabbable,isTabbable}){function TabbingManager(){this.stack=[];}function TabbingContext(options){$.extend(this,{level:null,$tabbableElements:$(),$disabledElements:$(),released:false,active:false,trapFocus:false},options);}$.extend(TabbingManager.prototype,{constrain(elements,{trapFocus=false}={}){const il=this.stack.length;for(let i=0;i<il;i++)this.stack[i].deactivate();let tabbableElements=[];$(elements).each((index,rootElement)=>{tabbableElements=[...tabbableElements,...tabbable(rootElement)];if(isTabbable(rootElement))tabbableElements=[...tabbableElements,rootElement];});const tabbingContext=new TabbingContext({level:this.stack.length,$tabbableElements:$(tabbableElements),trapFocus});this.stack.push(tabbingContext);tabbingContext.activate();$(document).trigger('drupalTabbingConstrained',tabbingContext);return tabbingContext;},release(){let toActivate=this.stack.length-1;while(toActivate>=0&&this.stack[toActivate].released)toActivate--;this.stack.splice(toActivate+1);if(toActivate>=0)this.stack[toActivate].activate();},activate(tabbingContext){const $set=tabbingContext.$tabbableElements;const level=tabbingContext.level;const $disabledSet=$(tabbable(document.body)).not($set);tabbingContext.$disabledElements=$disabledSet;const il=$disabledSet.length;for(let i=0;i<il;i++)this.recordTabindex($disabledSet.eq(i),level);$disabledSet.prop('tabindex',-1).prop('autofocus',false);let $hasFocus=$set.filter('[autofocus]').eq(-1);if($hasFocus.length===0)$hasFocus=$set.eq(0);$hasFocus.trigger('focus');if($set.length&&tabbingContext.trapFocus){$set.last().on('keydown.focus-trap',(event)=>{if(event.key==='Tab'&&!event.shiftKey){event.preventDefault();$set.first().focus();}});$set.first().on('keydown.focus-trap',(event)=>{if(event.key==='Tab'&&event.shiftKey){event.preventDefault();$set.last().focus();}});}},deactivate(tabbingContext){const $set=tabbingContext.$disabledElements;const level=tabbingContext.level;const il=$set.length;tabbingContext.$tabbableElements.first().off('keydown.focus-trap');tabbingContext.$tabbableElements.last().off('keydown.focus-trap');for(let i=0;i<il;i++)this.restoreTabindex($set.eq(i),level);},recordTabindex($el,level){const tabInfo=$el.data('drupalOriginalTabIndices')||{};tabInfo[level]={tabindex:$el[0].getAttribute('tabindex'),autofocus:$el[0].hasAttribute('autofocus')};$el.data('drupalOriginalTabIndices',tabInfo);},restoreTabindex($el,level){const tabInfo=$el.data('drupalOriginalTabIndices');if(tabInfo&&tabInfo[level]){const data=tabInfo[level];if(data.tabindex)$el[0].setAttribute('tabindex',data.tabindex);else $el[0].removeAttribute('tabindex');if(data.autofocus)$el[0].setAttribute('autofocus','autofocus');if(level===0)$el.removeData('drupalOriginalTabIndices');else{let levelToDelete=level;while(tabInfo.hasOwnProperty(levelToDelete)){delete tabInfo[levelToDelete];levelToDelete++;}$el.data('drupalOriginalTabIndices',tabInfo);}}}});$.extend(TabbingContext.prototype,{release(){if(!this.released){this.deactivate();this.released=true;Drupal.tabbingManager.release(this);$(document).trigger('drupalTabbingContextReleased',this);}},activate(){if(!this.active&&!this.released){this.active=true;Drupal.tabbingManager.activate(this);$(document).trigger('drupalTabbingContextActivated',this);}},deactivate(){if(this.active){this.active=false;Drupal.tabbingManager.deactivate(this);$(document).trigger('drupalTabbingContextDeactivated',this);}}});if(Drupal.tabbingManager)return;Drupal.tabbingManager=new TabbingManager();})(jQuery,Drupal,window.tabbable);;
(function($,Drupal,Backbone){const strings={tabbingReleased:Drupal.t('Tabbing is no longer constrained by the Contextual module.'),tabbingConstrained:Drupal.t('Tabbing is constrained to a set of @contextualsCount and the edit mode toggle.'),pressEsc:Drupal.t('Press the esc key to exit.')};function initContextualToolbar(context){if(!Drupal.contextual||!Drupal.contextual.collection)return;const contextualToolbar=Drupal.contextualToolbar;contextualToolbar.model=new contextualToolbar.StateModel({isViewing:document.querySelector('body .contextual-region')===null||localStorage.getItem('Drupal.contextualToolbar.isViewing')!=='false'},{contextualCollection:Drupal.contextual.collection});const viewOptions={el:$('.toolbar .toolbar-bar .contextual-toolbar-tab'),model:contextualToolbar.model,strings};new contextualToolbar.VisualView(viewOptions);new contextualToolbar.AuralView(viewOptions);}Drupal.behaviors.contextualToolbar={attach(context){if(once('contextualToolbar-init','body').length)initContextualToolbar(context);}};Drupal.contextualToolbar={model:null};})(jQuery,Drupal,Backbone);;
(function(Drupal,Backbone){Drupal.contextualToolbar.StateModel=Backbone.Model.extend({defaults:{isViewing:true,isVisible:false,contextualCount:0,tabbingContext:null},initialize(attrs,options){this.listenTo(options.contextualCollection,'reset remove add',this.countContextualLinks);this.listenTo(options.contextualCollection,'add',this.lockNewContextualLinks);this.listenTo(this,'change:contextualCount',this.updateVisibility);this.listenTo(this,'change:isViewing',(model,isViewing)=>{options.contextualCollection.each((contextualModel)=>{contextualModel.set('isLocked',!isViewing);});});},countContextualLinks(contextualModel,contextualCollection){this.set('contextualCount',contextualCollection.length);},lockNewContextualLinks(contextualModel,contextualCollection){if(!this.get('isViewing'))contextualModel.set('isLocked',true);},updateVisibility(){this.set('isVisible',this.get('contextualCount')>0);}});})(Drupal,Backbone);;
(function($,Drupal,Backbone,_){Drupal.contextualToolbar.AuralView=Backbone.View.extend({announcedOnce:false,initialize(options){this.options=options;this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'change:isViewing',this.manageTabbing);$(document).on('keyup',_.bind(this.onKeypress,this));this.manageTabbing();},render(){this.$el.find('button').attr('aria-pressed',!this.model.get('isViewing'));return this;},manageTabbing(){let tabbingContext=this.model.get('tabbingContext');if(tabbingContext){if(tabbingContext.active)Drupal.announce(this.options.strings.tabbingReleased);tabbingContext.release();}if(!this.model.get('isViewing')){tabbingContext=Drupal.tabbingManager.constrain($('.contextual-toolbar-tab, .contextual'));this.model.set('tabbingContext',tabbingContext);this.announceTabbingConstraint();this.announcedOnce=true;}},announceTabbingConstraint(){const strings=this.options.strings;Drupal.announce(Drupal.formatString(strings.tabbingConstrained,{'@contextualsCount':Drupal.formatPlural(Drupal.contextual.collection.length,'@count contextual link','@count contextual links')}));Drupal.announce(strings.pressEsc);},onKeypress(event){if(!this.announcedOnce&&event.keyCode===9&&!this.model.get('isViewing')){this.announceTabbingConstraint();this.announcedOnce=true;}if(event.keyCode===27)this.model.set('isViewing',true);}});})(jQuery,Drupal,Backbone,_);;
(function(Drupal,Backbone){Drupal.contextualToolbar.VisualView=Backbone.View.extend({events(){const touchEndToClick=function(event){event.preventDefault();event.target.click();};return {click(){this.model.set('isViewing',!this.model.get('isViewing'));},touchend:touchEndToClick};},initialize(){this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'change:isViewing',this.persist);},render(){this.$el.toggleClass('hidden',!this.model.get('isVisible'));this.$el.find('button').toggleClass('is-active',!this.model.get('isViewing'));return this;},persist(model,isViewing){if(!isViewing)localStorage.setItem('Drupal.contextualToolbar.isViewing','false');else localStorage.removeItem('Drupal.contextualToolbar.isViewing');}});})(Drupal,Backbone);;
(function($,Drupal){Drupal.behaviors.adminToolbar={attach:function(context,settings){$('a.toolbar-icon',context).removeAttr('title');$('ul.toolbar-menu li.menu-item--expanded a',context).on('focusin',function(){$('li.menu-item--expanded',context).removeClass('hover-intent');$(this).parents('li.menu-item--expanded').addClass('hover-intent');});$('ul.toolbar-menu li.menu-item a',context).keydown(function(e){if((e.shiftKey&&(e.keyCode||e.which)==9))if($(this).parent('.menu-item').prev().hasClass('menu-item--expanded'))$(this).parent('.menu-item').prev().addClass('hover-intent');});$('.toolbar-menu:first-child > .menu-item:not(.menu-item--expanded) a, .toolbar-tab > a',context).on('focusin',function(){$('.menu-item--expanded').removeClass('hover-intent');});$('.toolbar-menu:first-child > .menu-item',context).on('hover',function(){$(this,'a').css("background: #fff;");});$('ul:not(.toolbar-menu)',context).on({mousemove:function(){$('li.menu-item--expanded').removeClass('hover-intent');},hover:function(){$('li.menu-item--expanded').removeClass('hover-intent');}});if(window.matchMedia("(max-width: 767px)").matches&&$('body').hasClass('toolbar-tray-open')){$('body').removeClass('toolbar-tray-open');$('#toolbar-item-administration').removeClass('is-active');$('#toolbar-item-administration-tray').removeClass('is-active');};}};})(jQuery,Drupal);;
;(function(factory){'use strict';if(typeof define==='function'&&define.amd)define(['jquery'],factory);else{if(jQuery&&!jQuery.fn.hoverIntent)factory(jQuery);}})(function($){'use strict';var _cfg={interval:100,sensitivity:6,timeout:0};var INSTANCE_COUNT=0;var cX,cY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,$el,s,cfg){if(Math.sqrt((s.pX-cX)*(s.pX-cX)+(s.pY-cY)*(s.pY-cY))<cfg.sensitivity){$el.off(s.event,track);delete s.timeoutId;s.isActive=true;ev.pageX=cX;ev.pageY=cY;delete s.pX;delete s.pY;return cfg.over.apply($el[0],[ev]);}else{s.pX=cX;s.pY=cY;s.timeoutId=setTimeout(function(){compare(ev,$el,s,cfg);},cfg.interval);}};var delay=function(ev,$el,s,out){delete $el.data('hoverIntent')[s.id];return out.apply($el[0],[ev]);};$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var instanceId=INSTANCE_COUNT++;var cfg=$.extend({},_cfg);if($.isPlainObject(handlerIn)){cfg=$.extend(cfg,handlerIn);if(!$.isFunction(cfg.out))cfg.out=cfg.over;}else if($.isFunction(handlerOut))cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector});else cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut});var handleHover=function(e){var ev=$.extend({},e);var $el=$(this);var hoverIntentData=$el.data('hoverIntent');if(!hoverIntentData)$el.data('hoverIntent',(hoverIntentData={}));var state=hoverIntentData[instanceId];if(!state)hoverIntentData[instanceId]=state={id:instanceId};if(state.timeoutId)state.timeoutId=clearTimeout(state.timeoutId);var mousemove=state.event='mousemove.hoverIntent.hoverIntent'+instanceId;if(e.type==='mouseenter'){if(state.isActive)return;state.pX=ev.pageX;state.pY=ev.pageY;$el.off(mousemove,track).on(mousemove,track);state.timeoutId=setTimeout(function(){compare(ev,$el,state,cfg);},cfg.interval);}else{if(!state.isActive)return;$el.off(mousemove,track);state.timeoutId=setTimeout(function(){delay(ev,$el,state,cfg.out);},cfg.timeout);}};return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover},cfg.selector);};});;
(function($){$(document).ready(function(){$('.toolbar-tray-horizontal li.menu-item--expanded, .toolbar-tray-horizontal ul li.menu-item--expanded .menu-item').hoverIntent({over:function(){$(this).parent().find('li').removeClass('hover-intent');$(this).addClass('hover-intent');},out:function(){$(this).removeClass('hover-intent');},timeout:250});});})(jQuery);;
